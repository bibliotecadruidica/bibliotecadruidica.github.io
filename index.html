<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Biblioteca Druídica</title><meta name="description" content="Acervo de RPG."><link rel="shortcut icon" type="image/x-icon" href="./image/favicon.webp"/><link rel="preconnect" href="https://unpkg.com"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script><script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script><script src="https://unpkg.com/@babel/standalone/babel.min.js"></script><script src="https://cdn.tailwindcss.com"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script><script>tailwind.config={theme:{extend:{fontFamily:{inter:['Inter','sans-serif'],},},},};</script><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><style>:root{--primary-color:#111827;--secondary-color:#1f2937;--text-color:#f9fafb;--hover-color:#374151;--border-color:#4b5563;--transition-speed:.4s;--sidebar-width:260px;}
.sidebar,.menu-toggle{font-family:'Inter',sans-serif;}
body{transition:margin-left var(--transition-speed) ease;background:linear-gradient(rgba(17,24,39,0.85),rgba(17,24,39,0.85)),url('./image/bg2.png');background-size:cover;background-position:center;background-attachment:fixed;}
#overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.6);z-index:998;opacity:0;visibility:hidden;transition:opacity var(--transition-speed) ease,visibility var(--transition-speed) ease;}
#overlay.active{opacity:1;visibility:visible;}
.sidebar{position:fixed;top:0;left:0;height:100%;width:var(--sidebar-width);background:var(--secondary-color);z-index:999;padding:15px;display:flex;flex-direction:column;transform:translateX(-100%);transition:transform var(--transition-speed) ease-in-out;box-shadow:2px 0 10px rgba(0,0,0,0.2);}
.sidebar.active{transform:translateX(0);}
.sidebar-header{display:flex;align-items:center;padding-bottom:15px;margin-bottom:15px;border-bottom:1px solid var(--border-color);}
.sidebar-header .logo-icon{font-size:28px;color:var(--text-color);margin-right:15px;}
.sidebar-header .logo-text{font-size:20px;font-weight:600;color:var(--text-color);}
.sidebar-nav{list-style:none;flex-grow:1;overflow-y:auto;}
.nav-item{margin-bottom:5px;}
.nav-link{display:flex;align-items:center;padding:12px 15px;color:var(--text-color);text-decoration:none;border-radius:8px;white-space:nowrap;cursor:pointer;}
.nav-link:hover,.nav-link.active-link{background-color:var(--hover-color);}
.nav-link .icon{font-size:18px;min-width:40px;text-align:center;margin-right:10px;}
.nav-link .text{font-weight:400;}
.nav-item.has-dropdown .nav-link{position:relative;}
.dropdown-arrow{margin-left:auto;transition:transform .3s ease;}
.nav-item.dropdown-active>.nav-link .dropdown-arrow{transform:rotate(90deg);}
.submenu{list-style:none;padding-left:25px;max-height:0;overflow:hidden;transition:max-height .35s ease-in-out;}
.submenu-link{display:block;padding:10px 20px;color:#adb5bd;text-decoration:none;border-radius:5px;position:relative;cursor:pointer;}
.submenu-link::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:5px;height:5px;background-color:#adb5bd;border-radius:50%;}
.submenu-link:hover{background-color:var(--hover-color);color:white;}
.menu-toggle{position:fixed;top:20px;left:20px;z-index:1000;background:var(--primary-color);border:1px solid var(--border-color);color:white;padding:10px;cursor:pointer;border-radius:8px;display:flex;align-items:center;justify-content:center;width:45px;height:45px;box-shadow:0 2px 5px rgba(0,0,0,0.2);transition:left var(--transition-speed) ease-in-out,transform .3s ease;}
.menu-toggle:hover{transform:scale(1.1);background-color:var(--secondary-color);}
.sidebar.active~.menu-toggle{left:calc(var(--sidebar-width) + 20px);}
.menu-toggle .fa-bars,.menu-toggle .fa-xmark{font-size:24px;transition:transform .3s ease,opacity .3s ease;position:absolute;}
.menu-toggle .fa-xmark{opacity:0;transform:rotate(-90deg);}
.sidebar.active~.menu-toggle .fa-bars{opacity:0;transform:rotate(90deg);}
.sidebar.active~.menu-toggle .fa-xmark{opacity:1;transform:rotate(0deg);}
.main-content{padding-top:20px;padding-bottom:20px;transition:margin-left var(--transition-speed) ease-in-out;}
@media (min-width:769px){.sidebar.active~.main-content{margin-left:var(--sidebar-width);}}
@media (max-width:768px){.sidebar.active~.main-content{margin-left:0;}.sidebar.active~.menu-toggle{left:calc(var(--sidebar-width) - 60px);color:var(--text-color);background:transparent;border:none;box-shadow:none;}}</style></head><body><div id="overlay"></div><div id="root-app"></div><script type="text/babel">let booksData=[];async function loadBooksData(){try{const r=await fetch('./data/books.yml');if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const e=await r.text();booksData=jsyaml.load(e);console.log('Dados dos livros carregados:',booksData);ReactDOM.createRoot(document.getElementById('root-app')).render(<App/>)}catch(r){console.error('Erro ao carregar os dados dos livros:',r);document.getElementById('root-app').innerHTML='<p class="text-red-500 text-center text-xl mt-20">Erro ao carregar os livros. Por favor, tente novamente mais tarde.</p>'}}loadBooksData();const Book=({title,author,imageUrl,onSelectBook})=>{return(<article className="bg-gray-800 bg-opacity-0 hover:bg-opacity-50 p-4 rounded-lg shadow-lg flex flex-col items-center text-center transform hover:scale-105 transition-all duration-300 ease-in-out cursor-pointer h-full" onClick={onSelectBook}><figure className="book-cover mb-4 flex-shrink-0"><img src={imageUrl} alt={title} className="w-48 h-64 object-cover rounded-md shadow-md" loading="lazy" onError={e=>{e.target.onerror=null;e.target.src="https://placehold.co/192x256/2d3748/e2e8f0?text=Capa"}}/></figure><div className="book-info flex flex-col justify-start flex-grow"><h2 className="text-white text-lg font-semibold mb-1">{title}</h2><p className="text-gray-400 text-sm">{author}</p></div></article>)};const BookDetail=({book,onBackToList})=>{return(<div className="flex flex-col items-center bg-gray-800 bg-opacity-50 p-8 rounded-lg shadow-xl max-w-4xl mx-auto my-8"><button onClick={onBackToList} className="self-start mb-6 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-md">&larr; Voltar</button><h1 className="text-white text-4xl font-bold mb-4 text-center">{book.title}</h1><p className="text-gray-300 text-lg mb-6 text-center">Por: {book.author}</p><div className="book-cover mb-8"><a href={book.driveLink} target="_blank" rel="noopener noreferrer"><img src={book.imageUrl} alt={book.title} className="w-80 h-auto object-cover rounded-lg shadow-lg border-4 border-gray-700 hover:border-green-500 transition-colors" loading="lazy" onError={e=>{e.target.onerror=null;e.target.src="https://placehold.co/320x420/2d3748/e2e8f0?text=Capa+Indisponível"}}/></a></div><a href={book.driveLink} target="_blank" rel="noopener noreferrer" className="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition-colors">Acessar no Google Drive</a><p className="text-gray-400 text-sm mt-4 text-center">Clique na capa ou no botão para abrir o arquivo no Google Drive.</p></div>)};const Sidebar=({isMenuOpen,toggleMenu,handleNavigate})=>{const[activeDropdown,setActiveDropdown]=React.useState(null);const submenuRefs=React.useRef({});React.useEffect(()=>{const e=document.getElementById('sidebar'),t=document.getElementById('overlay');e&&t&&(isMenuOpen?(e.classList.add('active'),t.classList.add('active')):(e.classList.remove('active'),t.classList.remove('active')))},[isMenuOpen]);React.useEffect(()=>{Object.keys(submenuRefs.current).forEach(e=>{const t=submenuRefs.current[e];t&&(activeDropdown===e?t.style.maxHeight=t.scrollHeight+'px':t.style.maxHeight='0px')})},[activeDropdown]);const toggleDropdown=e=>{setActiveDropdown(activeDropdown===e?null:e)};const handleNavLinkClick=(e,t)=>{handleNavigate(e,t);if(window.innerWidth<=768)toggleMenu()};const categories={'Dungeons & Dragons':['D&D 5E','D&D 3.5'],'Mundo das Trevas':['Mago a Ascensão','Vampiro a Máscara','Vampiro a Idade das Trevas','Vampiro o Réquiem'],'Cthulhu Mythos':['Chamado de Cthulhu','Rastro de Cthulhu'],'Outros Sistemas':['Tormenta','Old Dragon','13ª Era','7º Mar','Violentina','Angus RPG','2Q RPG','Ação!!!']};return(<nav className="sidebar" id="sidebar"><div className="sidebar-header"><i className="fa-solid fa-dungeon logo-icon"></i><span className="logo-text">Bib. Druídica</span></div><ul className="sidebar-nav"><li className="nav-item"><a className="nav-link" onClick={()=>handleNavLinkClick('home')}><i className="fa-solid fa-house icon"></i><span className="text">Início</span></a></li>{Object.entries(categories).map(([e,t])=>(<li key={e} className={`nav-item has-dropdown ${activeDropdown===e?'dropdown-active':''}`}><a className="nav-link" onClick={()=>toggleDropdown(e)}><i className={`fa-solid ${e==='Dungeons & Dragons'?'fa-dragon':e==='Mundo das Trevas'?'fa-hat-wizard':e==='Cthulhu Mythos'?'fa-book-skull':'fa-scroll'} icon`}></i><span className="text">{e}</span><i className="fa-solid fa-chevron-right dropdown-arrow"></i></a><ul className="submenu" ref={a=>submenuRefs.current[e]=a}>{t.map(s=>(<li key={s}><a className="submenu-link" onClick={()=>handleNavLinkClick('category',s)}>{s}</a></li>))}</ul></li>))}</ul></nav>)};const App=()=>{const[currentView,setCurrentView]=React.useState('home');const[selectedCategory,setSelectedCategory]=React.useState('');const[selectedBook,setSelectedBook]=React.useState(null);const[searchTerm,setSearchTerm]=React.useState('');const[isMenuOpen,setIsMenuOpen]=React.useState(false);const[currentPage,setCurrentPage]=React.useState(1);const[booksPerPage,setBooksPerPage]=React.useState(20);const booksPerPageOptions=[20,40,60];const handleNavigate=(e,t='')=>{setCurrentView(e);setSelectedCategory(t);setSelectedBook(null);setSearchTerm('');setCurrentPage(1);window.scrollTo(0,0)};const handleSelectBook=e=>{setSelectedBook(e);setCurrentView('book');window.scrollTo(0,0)};const toggleMenu=()=>{setIsMenuOpen(e=>!e)};const handleBooksPerPageChange=e=>{setBooksPerPage(Number(e.target.value));setCurrentPage(1);};const filteredBooksCount=React.useMemo(()=>{let e=booksData;if(currentView==='category'&&selectedCategory){e=booksData.filter(e=>e.category===selectedCategory)}if(searchTerm){e=e.filter(e=>e.title.toLowerCase().includes(searchTerm.toLowerCase())||e.author.toLowerCase().includes(searchTerm.toLowerCase()))}return e.length},[currentView,selectedCategory,searchTerm]);const totalPages=Math.ceil(filteredBooksCount/booksPerPage);const booksForDisplay=React.useMemo(()=>{let e=booksData;if(currentView==='category'&&selectedCategory){e=booksData.filter(e=>e.category===selectedCategory)}if(searchTerm){e=e.filter(e=>e.title.toLowerCase().includes(searchTerm.toLowerCase())||e.author.toLowerCase().includes(searchTerm.toLowerCase()))}const t=currentPage*booksPerPage;const s=t-booksPerPage;return e.slice(s,t)},[currentView,selectedCategory,searchTerm,currentPage,booksPerPage]);const PaginationControls=({currentPage,totalPages,setCurrentPage})=>{if(totalPages<=1)return null;return(<div className="flex justify-center items-center mt-8 mb-8 space-x-4 flex-wrap gap-2"><button onClick={()=>setCurrentPage(prev=>Math.max(1,prev-1))} disabled={currentPage===1} className="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-md">Anterior</button>{[...Array(totalPages)].map((e,t)=>(<button key={t+1} onClick={()=>setCurrentPage(t+1)} className={`px-4 py-2 rounded-lg transition-colors shadow-md ${currentPage===t+1?'bg-green-600 text-white':'bg-gray-700 text-white hover:bg-gray-600'}`}>{t+1}</button>))}<button onClick={()=>setCurrentPage(prev=>Math.min(totalPages,prev+1))} disabled={currentPage===totalPages} className="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-md">Próximo</button></div>)};const renderContent=()=>{if(currentView==='book'&&selectedBook){return <BookDetail book={selectedBook} onBackToList={()=>handleNavigate(selectedCategory?'category':'home',selectedCategory)}/>}let e="Biblioteca Druídica",t="Seu acervo digital de livros de RPG.";if(currentView==='category'){e=selectedCategory;t=`Livros e suplementos para ${selectedCategory}.`}return(<><div className="text-center mb-10 pt-12"><h1 className="text-4xl md:text-5xl font-bold mb-2 text-white">{e}</h1><p className="text-lg text-gray-300">{t}</p>{currentView==='category'&&(<button onClick={()=>handleNavigate('home')} className="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-md">&larr; Voltar para o Início</button>)}</div><div className="mb-10 w-full max-w-lg mx-auto flex flex-col sm:flex-row gap-4"><input type="text" placeholder="Buscar por título ou autor..." className="w-full px-5 py-3 bg-gray-700 text-white rounded-full focus:outline-none focus:ring-2 focus:ring-green-500 transition-shadow" onChange={e=>{setSearchTerm(e.target.value);setCurrentPage(1)}} value={searchTerm}/><div className="relative"><select value={booksPerPage} onChange={handleBooksPerPageChange} className="appearance-none w-full sm:w-auto px-5 py-3 rounded-full transition-shadow pr-10 cursor-pointer bg-gray-700 border border-gray-600 shadow-md focus:outline-none focus:ring-2 focus:ring-green-500"><option value="20">20 livros</option><option value="40">40 livros</option><option value="60">60 livros</option></select><div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400"><svg className="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 6.096 6.924 4.682 8.338 9.293 12.95z"/></svg></div></div></div><PaginationControls currentPage={currentPage} totalPages={totalPages} setCurrentPage={setCurrentPage}/><section className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8">{booksForDisplay.length>0?booksForDisplay.map(e=>(<Book key={e.driveLink} title={e.title} author={e.author} imageUrl={e.imageUrl} onSelectBook={()=>handleSelectBook(e)}/>)):(<p className="col-span-full text-center text-gray-400 text-xl">Nenhum livro encontrado.</p>)}</section><PaginationControls currentPage={currentPage} totalPages={totalPages} setCurrentPage={setCurrentPage}/></>)};React.useEffect(()=>{if(isMenuOpen&&window.innerWidth<=768){document.body.style.marginLeft='0';document.body.classList.add('overflow-hidden')}else if(isMenuOpen&&window.innerWidth>768){document.body.style.marginLeft='var(--sidebar-width)'}else{document.body.style.marginLeft='0';document.body.classList.remove('overflow-hidden')}},[isMenuOpen]);React.useEffect(()=>{const e=e=>e.preventDefault();document.addEventListener('contextmenu',e);return()=>document.removeEventListener('contextmenu',e)},[]);return(<div className="min-h-screen text-gray-100 font-inter antialiased"><Sidebar isMenuOpen={isMenuOpen} toggleMenu={toggleMenu} handleNavigate={handleNavigate}/><button className={`menu-toggle ${isMenuOpen?'active':''}`} onClick={toggleMenu} aria-label="Toggle menu"><i className={`fa-solid fa-bars ${isMenuOpen?'hidden':''}`}></i><i className={`fa-solid fa-xmark ${isMenuOpen?'':'hidden'}`}></i></button><div id="overlay" className={isMenuOpen?'active':''} onClick={toggleMenu}></div><main className="container mx-auto px-4 py-8">{renderContent()}</main><footer className="bg-black bg-opacity-30 backdrop-blur-sm p-6 text-center text-gray-400 mt-12 rounded-t-lg"><p>&copy; {new Date().getFullYear()} Biblioteca Druídica. Todos os direitos reservados.</p><div className="mt-4"><p>Visite o canal na Twitch: <a href="https://www.twitch.tv/lukas_eso" target="_blank" rel="noopener noreferrer" className="text-purple-400 hover:underline">lukas_eso</a></p></div></footer></div>)};</script></body></html>
